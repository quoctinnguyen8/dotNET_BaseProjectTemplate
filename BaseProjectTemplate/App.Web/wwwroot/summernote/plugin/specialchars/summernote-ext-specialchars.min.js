!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(D){D.extend(D.summernote.plugins,{specialchars:function(t){var p=this,m=D.summernote.ui,o=t.layoutInfo.editor,n=t.options,i=n.langInfo,h=38,g=40,v=37,b=39,q=13,y=12,k=0,w=0,C=0,x=0,e=["&quot;","&amp;","&lt;","&gt;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&plusmn;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&times;","&divide;","&fnof;","&circ;","&tilde;","&ndash;","&mdash;","&lsquo;","&rsquo;","&sbquo;","&ldquo;","&rdquo;","&bdquo;","&dagger;","&Dagger;","&bull;","&hellip;","&permil;","&prime;","&Prime;","&lsaquo;","&rsaquo;","&oline;","&frasl;","&euro;","&image;","&weierp;","&real;","&trade;","&alefsym;","&larr;","&uarr;","&rarr;","&darr;","&harr;","&crarr;","&lArr;","&uArr;","&rArr;","&dArr;","&hArr;","&forall;","&part;","&exist;","&empty;","&nabla;","&isin;","&notin;","&ni;","&prod;","&sum;","&minus;","&lowast;","&radic;","&prop;","&infin;","&ang;","&and;","&or;","&cap;","&cup;","&int;","&there4;","&sim;","&cong;","&asymp;","&ne;","&equiv;","&le;","&ge;","&sub;","&sup;","&nsub;","&sube;","&supe;","&oplus;","&otimes;","&perp;","&sdot;","&lceil;","&rceil;","&lfloor;","&rfloor;","&loz;","&spades;","&clubs;","&hearts;","&diams;"];t.memo("button.specialchars",function(){return m.button({contents:'<i class="fa fa-font fa-flip-vertical"></i>',tooltip:i.specialChar.specialChar,click:function(){p.show()}}).render()}),this.makeSpecialCharSetTable=function(){var r=D("<table></table>");return D.each(e,function(e,t){var o=D("<td></td>").addClass("note-specialchar-node"),n=e%y==0?D("<tr></tr>"):r.find("tr").last(),i=m.button({callback:function(e){e.html(t),e.attr("title",t),e.attr("data-value",encodeURIComponent(t)),e.css({width:35,"margin-right":"2px","margin-bottom":"2px"})}}).render();o.append(i),n.append(o),e%y==0&&r.append(n)}),x=r.find("tr").length,C=y,r},this.initialize=function(){var e=n.dialogsInBody?D(document.body):o,t='<div class="form-group row-fluid">'+this.makeSpecialCharSetTable()[0].outerHTML+"</div>";this.$dialog=m.dialog({title:i.specialChar.select,body:t}).render().appendTo(e)},this.show=function(){var e=t.invoke("editor.getSelectedText");t.invoke("editor.saveRange"),this.showSpecialCharDialog(e).then(function(e){t.invoke("editor.restoreRange");e=D("<span></span>").html(e)[0];e&&t.invoke("editor.insertNode",e)}).fail(function(){t.invoke("editor.restoreRange")})},this.showSpecialCharDialog=function(f){return D.Deferred(function(t){var o=p.$dialog,r=o.find(".note-specialchar-node"),a=null,n=[h,g,v,b],i=q;function l(e){e&&(e.find("button").addClass("active"),a=e)}function d(e){e.find("button").removeClass("active"),a=null}function u(e){var o,n,i,t=r.length%C;v===e?1<k?k-=1:1===w&&1===k?(k=t,w=x):(k=C,w-=1):b===e?w===x&&t===k?w=k=1:k<C?k+=1:w+=k=1:h===e?1===w&&t<k?w=x-1:w-=1:g===e&&(w+=1),w===x&&t<k||x<w?w=1:w<1&&(w=x),o=w,n=k,i=null,D.each(r,function(e,t){if(Math.ceil((e+1)/y)===o&&((e+1)%y==0?y:(e+1)%y)===n)return i=t,!1}),(t=D(i))&&(d(a),l(t))}function e(e){e.preventDefault();e=e.keyCode;if(null!=e){if(-1<n.indexOf(e)){if(null===a)return l(r.eq(0)),void(w=k=1);u(e)}else e===i&&a&&(t.resolve(decodeURIComponent(a.find("button").attr("data-value"))),o.modal("hide"));return!1}}if(d(r),f)for(var c=0;c<r.length;c++){var s=D(r[c]);s.text()===f&&(l(s),w=Math.ceil((c+1)/y),k=(c+1)%y)}m.onDialogShown(p.$dialog,function(){D(document).on("keydown",e),p.$dialog.find("button").tooltip(),r.on("click",function(e){e.preventDefault(),t.resolve(decodeURIComponent(D(e.currentTarget).find("button").attr("data-value"))),m.hideDialog(p.$dialog)})}),m.onDialogHidden(p.$dialog,function(){r.off("click"),p.$dialog.find("button").tooltip(),D(document).off("keydown",e),"pending"===t.state()&&t.reject()}),m.showDialog(p.$dialog)})}}})});